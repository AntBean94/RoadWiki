<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.web.blog.model.repo.RoadmapShareRepo">

	<select id="selectAll" resultType="RoadmapShare">
		select *
		from roadmapshare
	</select>

	<select id="selectByUserName" parameterType="String"
		resultType="RoadmapShare">
		select * from roadmapshare
		where uid in
		(select uid from user where name like '%'+#{name}+'%')
	</select>

	<select id="selectByTitle" parameterType="String"
		resultType="Roadmap">
		select * from roadmapshare
		where title like '%' + #{title} +
		'%'
	</select>


	<insert id="insert" parameterType="RoadmapShare">
		insert into
		roadmapshare(rmid,uid,title)
		values (#{rmid},#{uid},#{title})
	</insert>
	<delete id="delete" parameterType="map">
		delete from roadmapshare
		where pid = #{pid} and uid = #{uid}
	</delete>

	<update id="updatelike" parameterType="map">
		update roadmapshare set
		likecnt = likecnt+1
		where uid = #{uid} and pid = #{pid}
	</update>
	<update id="updatedislike" parameterType="map">
		update roadmapshare set
		likecnt = likecnt-1
		where uid = #{uid} and pid = #{pid}
	</update>

	<insert id="insertlike" parameterType="map">
		insert into
		roadmaplikeuser
		values (#{pid},#{uid})
	</insert>

	<delete id="deletelike" parameterType="map">
		delete from
		roadmaplikeuser
		where pid = #{pid} and uid = #{uid}
	</delete>

	<select id="selectlike" parameterType="map" resultType="int">
		select
		count(*)
		from roadmaplikeuser
		where pid = #{pid} and uid = #{uid}
	</select>

</mapper>
	